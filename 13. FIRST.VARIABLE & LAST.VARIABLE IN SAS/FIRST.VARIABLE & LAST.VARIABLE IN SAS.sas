/* FIRST.VARIABLE & LAST.VARIABLE IN SAS: */



/* a. CREATING A COUNTER VARIABLE */
/* b. PROCESSING IN PDV */
/* c. SUBSET NTH OBSERVATION OF BY VARIABLE */
/* d. COMPUTING CUMULATIVE SUM */
/* e. TOTAL ON BY VARIABLE */





/* a. CREATING A COUNTER VARIABLE */

/* PREREQUISITS: */
/* 1. SORT THE DATA BASED ON VARIABLE THROUGH WHICH YOU CREATE A COUNTER. */

PROC SORT DATA=WORK.COUNTERS;
BY NAME;
RUN;

DATA COUNTER1;
SET WORK.COUNTERS;
BY NAME;

IF FIRST.NAME THEN COUNTER=1;
ELSE COUNTER+1;
RUN;


DATA COUNTER1;
SET WORK.COUNTERS;
BY NAME;
IF LAST.NAME THEN COUNTER=1;
ELSE COUNTER+1;
RUN;



/* c. SUBSET NTH OBSERVATION OF BY VARIABLE */

DATA COUNTER11;
SET WORK.COUNTER1;
BY NAME;

IF FIRST.NAME THEN COUNTER=1;
ELSE COUNTER+1;

IF COUNTER = 3 THEN OUTPUT;
RUN;



/* d. COMPUTING CUMULATIVE SUM */

/* ONE WAY TO DO THIS: */

DATA COUNTER11;
SET WORK.COUNTER1;
BY NAME;

IF FIRST.NAME THEN COUNTER=1;
ELSE COUNTER+1;

IF COUNTER=1 THEN CUM_TRAN_AMOUNT=TRAN_AMOUNT;
ELSE CUM_TRAN_AMOUNT+TRAN_AMOUNT;
RUN;


/* ANOTHER WAY TO DO THIS: */

DATA COUNTER11;
SET WORK.COUNTER1;
BY NAME;

IF FIRST.NAME THEN CUM_TRAN_AMOUNT=TRAN_AMOUNT;
ELSE CUM_TRAN_AMOUNT+TRAN_AMOUNT;
RUN;




/* e. TOTAL ON BY VARIABLE */

DATA COUNTER11;
SET WORK.COUNTER1;
BY NAME;

IF FIRST.NAME THEN CUM_TRAN_AMOUNT=TRAN_AMOUNT;
ELSE CUM_TRAN_AMOUNT+TRAN_AMOUNT;

IF LAST.NAME THEN OUTPUT;
RUN;







